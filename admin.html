<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - PubGlow</title>
  
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/pages.css">
  
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>P</text></svg>">
  
  <style>
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .action-buttons {
      display: flex;
      gap: 6px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-6);
      gap: var(--space-4);
    }
    .badge-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
  </style>
</head>
<body>
  <div class="admin-layout">
    <aside class="admin-sidebar">
      <a href="admin.html" class="admin-sidebar-brand">PubGlow Admin</a>
      
      <nav>
        <ul class="admin-sidebar-nav">
          <li><a href="#dashboard" class="admin-sidebar-link active" data-tab="dashboard">Dashboard</a></li>
          <li><a href="#pendingJurnal" class="admin-sidebar-link" data-tab="pendingJurnal">Pending Jurnal</a></li>
          <li><a href="#pendingArtikel" class="admin-sidebar-link" data-tab="pendingArtikel">Pending Artikel</a></li>
          <li><a href="#kelolaJurnal" class="admin-sidebar-link" data-tab="kelolaJurnal">Kelola Jurnal</a></li>
          <li><a href="#kelolaArtikel" class="admin-sidebar-link" data-tab="kelolaArtikel">Kelola Artikel</a></li>
          <li><a href="#kelolaScope" class="admin-sidebar-link" data-tab="kelolaScope">Kelola Scope</a></li>
          <li><a href="#kelolaKategori" class="admin-sidebar-link" data-tab="kelolaKategori">Kelola Kategori</a></li>
          <li style="margin-top: var(--space-8); padding-top: var(--space-8); border-top: 1px solid var(--border-color);">
            <a href="index.html" class="admin-sidebar-link">‚Üê Kembali ke Website</a>
          </li>
        </ul>
      </nav>
    </aside>

    <main class="admin-main">
      <!-- Dashboard Tab -->
      <div class="tab-content active" id="dashboardTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">Overview statistik dan aktivitas PubGlow</p>
          </div>
        </div>

        <div class="stats-grid" style="margin-bottom: var(--space-8);">
          <div class="stat-card">
            <div class="stat-label">Total Jurnal</div>
            <div class="stat-value" id="statJurnal">-</div>
            <div class="stat-change positive">‚Üë Aktif di platform</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Total Artikel</div>
            <div class="stat-value" id="statArtikel">-</div>
            <div class="stat-change positive">‚Üë Published</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Pending Jurnal</div>
            <div class="stat-value" id="statPendingJurnal">-</div>
            <div class="stat-change" style="color: var(--text-tertiary);">Menunggu review</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Pending Artikel</div>
            <div class="stat-value" id="statPendingArtikel">-</div>
            <div class="stat-change" style="color: var(--text-tertiary);">Menunggu review</div>
          </div>
        </div>

        <div class="grid grid-cols-2" style="gap: var(--space-6);">
          <div class="card">
            <h3 style="margin-bottom: var(--space-4); font-size: var(--font-size-lg);">Quick Actions</h3>
            <div style="display: flex; flex-direction: column; gap: var(--space-3);">
              <a href="#pendingJurnal" class="btn btn-outline" style="justify-content: flex-start; text-decoration: none;">Review Jurnal Pending</a>
              <a href="#pendingArtikel" class="btn btn-outline" style="justify-content: flex-start; text-decoration: none;">Review Artikel Pending</a>
              <button class="btn btn-outline" style="justify-content: flex-start;" onclick="location.reload()">Refresh Data</button>
            </div>
          </div>

          <div class="card">
            <h3 style="margin-bottom: var(--space-4); font-size: var(--font-size-lg);">Recent Activity</h3>
            <div id="recentActivity" style="font-size: var(--font-size-sm); color: var(--text-secondary);">
              <p>Loading aktivitas terbaru...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pending Jurnal Tab -->
      <div class="tab-content" id="pendingJurnalTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Pending Jurnal</h1>
            <p class="page-subtitle">Review dan approve submission jurnal dari kontributor</p>
          </div>
        </div>
        
        <div class="card">
          <div id="pendingJurnalTable">
            <div class="text-center" style="padding: 40px;">
              <div class="loader" style="margin: 0 auto 16px;"></div>
              <p style="color: var(--text-secondary);">Memuat data...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pending Artikel Tab -->
      <div class="tab-content" id="pendingArtikelTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Pending Artikel</h1>
            <p class="page-subtitle">Review dan approve submission artikel dari kontributor</p>
          </div>
        </div>
        
        <div class="card">
          <div id="pendingArtikelTable">
            <div class="text-center" style="padding: 40px;">
              <div class="loader" style="margin: 0 auto 16px;"></div>
              <p style="color: var(--text-secondary);">Memuat data...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Kelola Jurnal Tab -->
      <div class="tab-content" id="kelolaJurnalTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Kelola Jurnal</h1>
            <p class="page-subtitle">Manage semua jurnal di platform</p>
          </div>
          <a href="tambah-jurnal.html" class="btn btn-outline btn-sm">+ Tambah Jurnal</a>
        </div>
        
        <div class="card">
          <div style="margin-bottom: var(--space-4); display: flex; justify-content: space-between; align-items: center; gap: var(--space-3); flex-wrap: wrap;">
            <input type="text" id="searchJurnal" class="input" placeholder="Cari jurnal..." style="max-width: 300px;">
            <div style="display: flex; gap: var(--space-2);">
              <select id="filterJurnalStatus" class="input" style="max-width: 150px;">
                <option value="all">Semua Status</option>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
              </select>
              <button class="btn btn-outline btn-sm" onclick="loadKelolaJournals()">Refresh</button>
            </div>
          </div>
          <div id="kelolaJurnalTable">
            <div class="text-center" style="padding: 40px;">
              <p style="color: var(--text-secondary);">Klik tab ini untuk memuat data</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Kelola Artikel Tab -->
      <div class="tab-content" id="kelolaArtikelTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Kelola Artikel</h1>
            <p class="page-subtitle">Manage semua artikel di blog</p>
          </div>
          <a href="tambah-artikel.html" class="btn btn-outline btn-sm">+ Tambah Artikel</a>
        </div>
        
        <div class="card">
          <div style="margin-bottom: var(--space-4); display: flex; justify-content: space-between; align-items: center; gap: var(--space-3); flex-wrap: wrap;">
            <input type="text" id="searchArtikel" class="input" placeholder="Cari artikel..." style="max-width: 300px;">
            <div style="display: flex; gap: var(--space-2);">
              <select id="filterArtikelStatus" class="input" style="max-width: 150px;">
                <option value="all">Semua Status</option>
                <option value="published">Published</option>
                <option value="draft">Draft</option>
                <option value="rejected">Rejected</option>
              </select>
              <button class="btn btn-outline btn-sm" onclick="loadKelolaArticles()">Refresh</button>
            </div>
          </div>
          <div id="kelolaArtikelTable">
            <div class="text-center" style="padding: 40px;">
              <p style="color: var(--text-secondary);">Klik tab ini untuk memuat data</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Kelola Scope Tab -->
      <div class="tab-content" id="kelolaScopeTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Kelola Scope Jurnal</h1>
            <p class="page-subtitle">Manage kategori/bidang ilmu untuk jurnal</p>
          </div>
        </div>
        
        <div class="card" style="margin-bottom: var(--space-6);">
          <h3 style="margin-bottom: var(--space-4);">Tambah Scope Baru</h3>
          <form id="formTambahScope" style="display: flex; gap: var(--space-3); align-items: flex-end;">
            <div class="form-group" style="flex: 1; margin: 0;">
              <label for="namaScope" class="form-label">Nama Scope</label>
              <input type="text" id="namaScope" class="input" placeholder="Contoh: Teknik Informatika" required>
            </div>
            <button type="submit" class="btn btn-primary">+ Tambah</button>
          </form>
        </div>

        <div class="card">
          <h3 style="margin-bottom: var(--space-4);">Daftar Scope</h3>
          <div id="scopeList">
            <div class="text-center" style="padding: 40px;">
              <p style="color: var(--text-secondary);">Memuat data...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Kelola Kategori Tab -->
      <div class="tab-content" id="kelolaKategoriTab">
        <div class="page-header">
          <div>
            <h1 class="page-title">Kelola Kategori Artikel</h1>
            <p class="page-subtitle">Manage kategori untuk artikel blog</p>
          </div>
        </div>
        
        <div class="card" style="margin-bottom: var(--space-6);">
          <h3 style="margin-bottom: var(--space-4);">Tambah Kategori Baru</h3>
          <form id="formTambahKategori" style="display: flex; gap: var(--space-3); align-items: flex-end;">
            <div class="form-group" style="flex: 1; margin: 0;">
              <label for="namaKategori" class="form-label">Nama Kategori</label>
              <input type="text" id="namaKategori" class="input" placeholder="Contoh: Tips Publikasi" required>
            </div>
            <button type="submit" class="btn btn-primary">+ Tambah</button>
          </form>
        </div>

        <div class="card">
          <h3 style="margin-bottom: var(--space-4);">Daftar Kategori</h3>
          <div id="kategoriList">
            <div class="text-center" style="padding: 40px;">
              <p style="color: var(--text-secondary);">Memuat data...</p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div class="toast-container" id="toastContainer"></div>

  <script>
    console.log('üé¨ Navigation script loaded');
    
    let currentTab = 'dashboard';
    
    function switchTab(tabName) {
      console.log('‚úÖ switchTab called:', tabName);
      
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      const targetTab = document.getElementById(tabName + 'Tab');
      if (targetTab) {
        targetTab.classList.add('active');
        console.log('  ‚úÖ Showing tab:', targetTab.id);
      } else {
        console.error('  ‚ùå Tab not found:', tabName + 'Tab');
      }
      
      document.querySelectorAll('.admin-sidebar-link').forEach(link => {
        link.classList.remove('active');
      });
      const activeLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
      
      currentTab = tabName;
      
      if (window.loadTabData) {
        window.loadTabData(tabName);
      }
    }
    
    window.switchTab = switchTab;
    
    function handleHashChange() {
      const hash = window.location.hash.substring(1) || 'dashboard';
      console.log('üîó Hash:', hash);
      switchTab(hash);
    }
    
    window.addEventListener('hashchange', handleHashChange);
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleHashChange);
    } else {
      handleHashChange();
    }
    
    console.log('‚úÖ Navigation system ready');
  </script>

  <script type="module" src="js/admin.js"></script>
</body>
</html>